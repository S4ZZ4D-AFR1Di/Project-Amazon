;/*FB_PKG_DELIM*/

__d("CometProfileSwitchCleanAndLogoutUtils",["CurrentUser","goForceFullPageRedirectTo","profileCometSwitcherCleanup","waitForCleanupWithTimeout"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g){f===void 0&&(f=!0),c("waitForCleanupWithTimeout")(function(){var d;return c("profileCometSwitcherCleanup")(a,b,f?{isSwitchingToMainProfile:e===c("CurrentUser").getAccountID(),origin:(d=g)!=null?d:"fallback",withPostSwitchLogging:!0}:{isSwitchingToMainProfile:!1,origin:null,withPostSwitchLogging:!1})},{onDone:function(){if(d==null)window.location.reload();else try{c("goForceFullPageRedirectTo")(d)}catch(a){window.location.reload()}}})}g.cleanAndLogoutForProfileSwitch=a}),98);
__d("cometProfileSwitchMutationWithWebStorageLogoutAllowlist",["CometProfileSwitchCleanAndLogoutUtils","CurrentUser","JSResourceForInteraction","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("CometProfileSwitchWithWebStorageLogoutAllowlistMutation").__setRef("cometProfileSwitchMutationWithWebStorageLogoutAllowlist");function a(a){var b=a.actorID,e=a.destinationURL,f=a.environment,g=a.onCompleted,i=a.onError,j=a.origin,k=a.profileId,l=a.traceAPI;l==null?void 0:l.addMetadata("target_profile_id",k);l.addAnnotationInt("is_switching_to_main_profile",k===c("CurrentUser").getAccountID()?2:1);c("promiseDone")(h.load().then(function(a){a=a.switchProfileWithLogout;a(f,{profileId:k},{onCompleted:function(a){g==null?void 0:g();l.forceCompleteTrace();a=a==null?void 0:(a=a.profile_switcher_comet_login_with_logout)==null?void 0:a.logout_whitelist;Array.isArray(a)&&d("CometProfileSwitchCleanAndLogoutUtils").cleanAndLogoutForProfileSwitch(b,a,e,k,!0,j)},onError:function(a){i==null?void 0:i(a)}})}))}g["default"]=a}),98);
__d("useCometProfileSwitchWithWebStorageLogoutAllowlistMutation",["Actor","CometRelay","cometProfileSwitchMutationWithWebStorageLogoutAllowlist","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a,b,e){var f=d("Actor").useActor(),g=f[0],h=d("CometRelay").useRelayEnvironment();return i(function(d,f){if(a==null)return;c("cometProfileSwitchMutationWithWebStorageLogoutAllowlist")({actorID:g,destinationURL:b,environment:h,onError:e,origin:f,profileId:a,traceAPI:d})},[a,g,b,h,e])}g["default"]=a}),98);