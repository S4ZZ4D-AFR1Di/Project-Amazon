;/*FB_PKG_DELIM*/

__d("ProfileCometProfilePictureEditPreviewDialogQuery.graphql",["CometTextWithEntitiesRelay_textWithEntities$normalization.graphql","ProfileCometProfilePictureEditPreviewDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"scale"}],c={kind:"Literal",name:"field",value:"PROFILE_PHOTO"},d={kind:"Literal",name:"interface",value:"FB_WEB"},e=[c,d,{kind:"Literal",name:"type",value:"UPDATE_PASSIVE"}],f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureEditPreviewDialogQuery",selections:[{args:null,kind:"FragmentSpread",name:"useFXIMCometProfilePhotoSyncReminderOnSaveHandler_fxim"},{kind:"InlineDataFragmentSpread",name:"fximCometProfilePhotoSyncPassiveReminder_query",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fxim_viewer_identity",plural:!1,selections:[{alias:"profile_photo_update_passive_reminder",args:e,concreteType:null,kind:"LinkedField",name:"reminder",plural:!1,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"FXIMCometProfilePhotoSyncPassiveReminder_textWithEntities"}],storageKey:null}],storageKey:'reminder(field:"PROFILE_PHOTO",interface:"FB_WEB",type:"UPDATE_PASSIVE")'}],storageKey:null}],args:null,argumentDefinitions:[]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ProfileCometProfilePictureEditPreviewDialogQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fxim_viewer_identity",plural:!1,selections:[f,{alias:"profile_photo_update_interstitial_reminder",args:[c,d,{kind:"Literal",name:"type",value:"UPDATE_INTERSTITIAL"}],concreteType:null,kind:"LinkedField",name:"reminder",plural:!1,selections:[f,{kind:"InlineFragment",selections:[{args:null,documentName:"useFXIMCometProfilePhotoSyncReminderOnSaveHandler_fxim",fragmentName:"FXIMCometProfilePhotoSyncReminderDialog_reminder",fragmentPropName:"reminder",kind:"ModuleImport"}],type:"FXIMReminder",abstractKey:null}],storageKey:'reminder(field:"PROFILE_PHOTO",interface:"FB_WEB",type:"UPDATE_INTERSTITIAL")'},{alias:"profile_photo_update_passive_reminder",args:e,concreteType:null,kind:"LinkedField",name:"reminder",plural:!1,selections:[f,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[{args:null,fragment:b("CometTextWithEntitiesRelay_textWithEntities$normalization.graphql"),kind:"FragmentSpread"}],storageKey:null}],storageKey:'reminder(field:"PROFILE_PHOTO",interface:"FB_WEB",type:"UPDATE_PASSIVE")'}],storageKey:null}]},params:{id:b("ProfileCometProfilePictureEditPreviewDialogQuery_facebookRelayOperation"),metadata:{},name:"ProfileCometProfilePictureEditPreviewDialogQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("ProfileCometProfilePictureEditPreviewDialog.react",["fbt","Actor","CometCardedDialogLegacy.react","CometRelay","ProfileCometContext","ProfileCometProfilePictureEditPreview.react","ProfileCometProfilePictureEditPreviewDialogQuery.graphql","ProfileCometProfilePictureEditStrings","fximCometProfilePhotoSyncPassiveReminder","react","useFXIMCometProfilePhotoSyncReminderOnSaveHandler","useIsMountedRef","useTriggerAccessibilityAlert"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useMemo;function a(a){var e=a.props,f=e.onClose,g=e.photo;e=e.source;a=a.queries;a=d("CometRelay").usePreloadedQuery(i!==void 0?i:i=b("ProfileCometProfilePictureEditPreviewDialogQuery.graphql"),a.queryReference);var j=d("Actor").useActor(),n=j[0],o=c("useIsMountedRef")(),p=c("useTriggerAccessibilityAlert")();j=m(function(){return{isInViewAs:!1,profileID:n,profileVanity:null,viewerID:n}},[n]);var q=c("useFXIMCometProfilePhotoSyncReminderOnSaveHandler")({fragment:a,source:e}),r=l(function(){o.current&&f(),p(h._("__JHASH__fP9G92nkMn4__JHASH__"))},[o,f,p]);a=c("fximCometProfilePhotoSyncPassiveReminder")(a,e);var s=a;a=!Boolean(a);return k.jsx(c("ProfileCometContext").Provider,{value:j,children:k.jsx(c("CometCardedDialogLegacy.react"),{onClose:f,size:"medium",title:d("ProfileCometProfilePictureEditStrings").DIALOG_TITLE,withCloseButton:!0,children:k.jsx(c("ProfileCometProfilePictureEditPreview.react"),{canCropPhoto:!0,canMakeTemporary:!0,onCancel:f,onSave:q,onSaveSuccess:r,photo:g,privacyDisclaimer:s,profileID:n,showPrivacyDisclaimerGlobe:a,source:e,targetType:"profile"})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSClearThreadViewLoadingSpinner",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sortBy(b.db.table(13).fetch([[[a[0]]]]),[["maxTimestampMs","DESC"]]).next().then(function(a,c){var d=a.done;a=a.value;return d?0:(c=a.item,b.forEach(b.filter(b.db.table(13).fetch([[[c.threadKey,c.minTimestampMs,c.minMessageId]]]),function(a){return b.i64.eq(a.threadKey,c.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(a.minTimestampMs,c.minTimestampMs)&&a.minMessageId===c.minMessageId}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!1})}))})},function(a){return b.resolve(c)}])}e.exports=a}),null);